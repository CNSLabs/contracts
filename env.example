# CNS deployment environment
# Copy to `.env` and update with real values before running scripts.

# ===========================
# Secrets (Never commit!)
# ===========================

# Hex-encoded private key used by forge script broadcasting (never commit the real key)
# Our deploy scripts use this PK for contract deployment
PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# REQUIRED: Private key for CNS_DEFAULT_ADMIN address (used for role management and admin operations)
# This must correspond to the CNS_DEFAULT_ADMIN address below
# Used for: granting roles to timelock, setting up allowlist, role management
CNS_DEFAULT_ADMIN_PRIVATE_KEY=

# REQUIRED: Private key for CNS_UPGRADER address (used for deploying L2 token contract upgrades)
# This must correspond to the CNS_UPGRADER address below
# Used for: granting roles to timelock, setting up allowlist, role management
CNS_UPGRADER_PRIVATE_KEY=

# Optional: Address for DEFAULT_ADMIN_ROLE (governance/multisig address for production)
# This address controls role management and has backup access to operational roles
# RECOMMENDED: Gnosis Safe multisig (3-of-5 or 4-of-7 configuration)
# If not set, defaults to the env-specific config file value (l2.roles.admin)
CNS_DEFAULT_ADMIN=0x0000000000000000000000000000000000000000

# Optional: Contract upgrader address (defaults to CNS_DEFAULT_ADMIN)
# Can be a multisig or timelock contract address
# If not set, defaults to the env-specific config file value (l2.roles.upgrader)
CNS_UPGRADER=

# Optional: Emergency pause/unpause address (defaults to CNS_DEFAULT_ADMIN)
# Can be a hot wallet for fast response, or another multisig
# If not set, defaults to the env-specific config file value (l2.roles.pauser)
CNS_PAUSER=

# Optional: Allowlist manager address (defaults to CNS_DEFAULT_ADMIN)
# Can be a hot wallet or automated backend address
# If not set, defaults to the env-specific config file value (l2.roles.allowlistAdmin)
CNS_ALLOWLIST_ADMIN=

# ===========================
# Token Configuration (Optional - have defaults)
# ===========================

# L2 token configuration (optional, only set to override defaults)
# Defaults: "CNS Linea Token", "CNSL", 18 decimals
L2_TOKEN_NAME=
L2_TOKEN_SYMBOL=
L2_TOKEN_DECIMALS=

# L1 token configuration (optional, only set to override defaults)
# Defaults: "Canonical CNS Token", "CNS"
TOKEN_NAME=
TOKEN_SYMBOL=

# ===========================
# Deployment Process
# ===========================
# The deployment script (2_DeployCNSTokenL2.s.sol) will:
#
# 1. Deploy CNSTokenL2 implementation contract
# 2. Deploy ERC1967 proxy with atomic initialization
# 3. Assign roles based on environment variables
# 4. Deploy TimelockController (if configured)
# 5. Grant UPGRADER_ROLE to timelock, revoke from admin
# 6. Setup allowlist with Hedgey addresses
# 7. Verify all deployments and configurations
#
# Usage:
#   ENV=dev forge script script/2_DeployCNSTokenL2.s.sol:DeployCNSTokenL2 \
#     --rpc-url linea-sepolia --broadcast --verify
#
# The script loads additional configuration from config files:
# - config/dev.json (for dev environment)
# - config/alpha.json (for alpha environment)  
# - config/production.json (for production environment)

# ===========================
# Contract Addresses
# ===========================

# Optional: L1 canonical token address override.
# This is the canonical CNS token that will be bridged to L2
# Set this to the deployed L1 token address
# If not set, defaults to the env-specific config file value (l2.l1Token).
#   If no value is specified in the config file, then it is looked up in the local forge deploy history.
CNS_TOKEN_L1=0x0000000000000000000000000000000000000000

# Linea TokenBridge addresses for the target network
# Sepolia L1: 0x5A0a48389BB0f12E5e017116c1105da97E129142
# Sepolia L2: 0x93DcAdf238932e6e6a85852caC89cBd71798F463
# Mainnet L1: 0xd19d4B5d358258f05D7B411E21A1460D11B0876F
# Mainnet L2: 0xd19d4B5d358258f05D7B411E21A1460D11B0876F
LINEA_L1_BRIDGE=0x5A0a48389BB0f12E5e017116c1105da97E129142
LINEA_L2_BRIDGE=0x93DcAdf238932e6e6a85852caC89cBd71798F463

# Optional: Deployed proxy contract addresses override
# If not set, defaults to the env-specific config file value (l2.proxy).
#   If no value is specified in the config file, then it is looked up in the local forge deploy history.
CNS_TOKEN_L2_PROXY=

# ===========================
# RPC Endpoints
# ===========================
# Used by foundry.toml network aliases
# Recommend using your own RPC providers for production

# Ethereum
ETH_MAINNET_RPC_URL=https://eth.llamarpc.com
ETH_SEPOLIA_RPC_URL=https://ethereum-sepolia-rpc.publicnode.com

# Linea
LINEA_MAINNET_RPC_URL=https://rpc.linea.build
LINEA_SEPOLIA_RPC_URL=https://rpc.sepolia.linea.build

# ===========================
# Verification API Keys
# ===========================

ETHERSCAN_API_KEY=
LINEA_ETHERSCAN_API_KEY=

# ===========================
# Hedgey Integration (REQUIRED)
# ===========================
# Hedgey contract addresses are loaded from config files (config/dev.json, etc.)
# These addresses are automatically allowlisted during deployment
# 
# Config file structure:
# {
#   "hedgey": {
#     "investorLockup": "0xaA8d13b9c2A9368aa108dde629237EF719eEC14e",
#     "batchPlanner": "0x642581ed679E77e0D9AebFdBCA2a0B4ab194532c",
#     "tokenVestingPlans": "0x23103cc8D394Cd4440711F2d2e436FA46d90EF55",
#     "recipient": "0x057ef20Ed09fc34Da5af791376F4447ba0B8cDE6",
#     "amount": 10000000000000000000,
#     "start": 1759752000,
#     "cliff": 1759838400,
#     "rate": 23148148148148,
#     "period": 1
#   }
# }
#
# The deployment script will:
# 1. Load Hedgey addresses from config files
# 2. Validate they are contracts (code.length > 0)
# 3. Automatically allowlist them during deployment
# 4. Verify allowlisting in post-deployment checks
#
# No environment variables needed - all configured via config files
